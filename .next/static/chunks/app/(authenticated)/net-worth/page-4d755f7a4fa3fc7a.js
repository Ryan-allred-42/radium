(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[876],{43284:function(e,t,a){Promise.resolve().then(a.bind(a,34257))},34257:function(e,t,a){"use strict";a.r(t),a.d(t,{default:function(){return v}});var s=a(3827),r=a(58714),n=a(64090),l=a(27815),i=a(85754),d=a(45179),o=a(35069),c=a(97256),u=a(42706),f=a(49842),m=a(39335),x=a(59919),h=a(26587),p=a(66363),g=a(38333),y=a(23356),j=a(22983),b=a(10166),N=a(98061);function v(){let[e,t]=(0,n.useState)([]),[a,v]=(0,n.useState)(!1),[w,k]=(0,n.useState)(null),[C,D]=(0,n.useState)((0,o.WU)(new Date,"yyyy-MM-dd")),[_,z]=(0,n.useState)([{title:"",value:0}]),[M,S]=(0,n.useState)(null),W=(0,r.createClientComponentClient)();(0,n.useEffect)(()=>{(async()=>{let{data:{user:e}}=await W.auth.getUser();if(!e)return;let{data:a}=await W.from("net_worth_log").select("*").eq("userid",e.id).is("deleted_at",null).order("date",{ascending:!0});t(a||[])})()},[]);let T=e=>Object.values(e.value).reduce((e,t)=>e+t,0),O=()=>0===e.length?null:[...e].sort((e,t)=>new Date(t.created_at).getTime()-new Date(e.created_at).getTime())[0],R=()=>{let e=O();e?z(Object.entries(e.title).map(e=>{let[t,a]=e;return{title:a,value:0}})):z([{title:"",value:0}])},E=e=>{z(_.filter((t,a)=>a!==e))},U=(e,t,a)=>{let s=[..._];s[e]={...s[e],[t]:"value"===t?parseFloat(a)||0:a},z(s)},q=async a=>{if(a.preventDefault(),e.some(e=>e.date===C)&&!w){S("An entry for this date already exists");return}S(null);let{data:{user:s}}=await W.auth.getUser();if(!s)return;let r={},n={};if(_.forEach(e=>{e.title.trim()&&(r[e.title]=e.title,n[e.title]=e.value)}),w){let{error:a}=await W.from("net_worth_log").update({title:r,value:n,date:C}).eq("id",w.id);a||t(e.map(e=>e.id===w.id?{...e,title:r,value:n,date:C}:e))}else{let{data:a,error:l}=await W.from("net_worth_log").insert([{userid:s.id,title:r,value:n,date:C}]).select().single();!l&&a&&t([...e,a])}v(!1),k(null),z([{title:"",value:0}]),D((0,o.WU)(new Date,"yyyy-MM-dd"))},A=e=>{k(e),D(e.date),z(Object.entries(e.title).map(t=>{let[a,s]=t;return{title:s,value:e.value[a]}})),v(!0)},I=async a=>{let{error:s}=await W.from("net_worth_log").update({deleted_at:new Date().toISOString()}).eq("id",a);s||t(e.filter(e=>e.id!==a))};return(0,s.jsxs)("div",{className:"space-y-8",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Net Worth Tracker"}),(0,s.jsx)(i.z,{onClick:()=>{v(!0),k(null),R(),D((0,o.WU)(new Date,"yyyy-MM-dd"))},children:"Add Entry"})]}),(0,s.jsxs)(l.Zb,{className:"bg-white dark:bg-neutral-800",children:[(0,s.jsx)(l.Ol,{children:(0,s.jsx)(l.ll,{className:"text-lg",children:"Current Net Worth"})}),(0,s.jsxs)(l.aY,{children:[(0,s.jsxs)("div",{className:"text-3xl font-bold",children:["$",(0===e.length?0:T([...e].sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime())[0])).toLocaleString()]}),(0,s.jsxs)("p",{className:"text-sm text-muted-foreground mt-1",children:["As of ",e.length>0?(0,o.WU)((0,c.D)(e[e.length-1].date),"MMMM d, yyyy"):"No entries yet"]})]})]}),(0,s.jsxs)(l.Zb,{className:"bg-white dark:bg-neutral-800",children:[(0,s.jsx)(l.Ol,{children:(0,s.jsx)(l.ll,{children:"Net Worth Over Time"})}),(0,s.jsx)(l.aY,{children:(0,s.jsx)("div",{className:"h-[400px]",children:(0,s.jsx)(h.h,{width:"100%",height:"100%",children:(0,s.jsxs)(p.w,{data:e.sort((e,t)=>new Date(e.date).getTime()-new Date(t.date).getTime()).map(e=>({date:(0,o.WU)((0,c.D)(e.date),"MMM d, yyyy"),value:T(e)})),margin:{top:10,right:10,left:10,bottom:20},children:[(0,s.jsx)(g.q,{strokeDasharray:"3 3"}),(0,s.jsx)(y.K,{dataKey:"date",angle:-45,textAnchor:"end",height:70,tick:{fontSize:12}}),(0,s.jsx)(j.B,{tick:{fontSize:12},tickFormatter:e=>"$".concat(e.toLocaleString())}),(0,s.jsx)(b.u,{formatter:e=>["$".concat(e.toLocaleString()),"Net Worth"],contentStyle:{fontSize:12}}),(0,s.jsx)(N.x,{type:"monotone",dataKey:"value",stroke:"#2563eb",strokeWidth:2,dot:{r:4},activeDot:{r:6}})]})})})})]}),(0,s.jsxs)(l.Zb,{className:"bg-white dark:bg-neutral-800",children:[(0,s.jsx)(l.Ol,{children:(0,s.jsx)(l.ll,{children:"History"})}),(0,s.jsx)(l.aY,{children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"border-b",children:[(0,s.jsx)("th",{className:"text-left py-3 px-4",children:"Date"}),(0,s.jsx)("th",{className:"text-left py-3 px-4",children:"Items"}),(0,s.jsx)("th",{className:"text-right py-3 px-4",children:"Total"}),(0,s.jsx)("th",{className:"text-right py-3 px-4",children:"Actions"})]})}),(0,s.jsx)("tbody",{children:e.sort((e,t)=>new Date(t.date).getTime()-new Date(e.date).getTime()).map(e=>(0,s.jsxs)("tr",{className:"border-b",children:[(0,s.jsx)("td",{className:"py-4 px-4",children:(0,o.WU)((0,c.D)(e.date),"MMMM d, yyyy")}),(0,s.jsx)("td",{className:"py-4 px-4",children:(0,s.jsx)("div",{className:"space-y-1",children:Object.entries(e.title).map((t,a)=>{let[r,n]=t;return(0,s.jsxs)("div",{className:"flex justify-between text-sm",children:[(0,s.jsx)("span",{className:"text-muted-foreground",children:n}),(0,s.jsxs)("span",{className:"ml-4",children:["$",e.value[r].toLocaleString()]})]},r)})})}),(0,s.jsxs)("td",{className:"py-4 px-4 text-right font-medium",children:["$",T(e).toLocaleString()]}),(0,s.jsx)("td",{className:"py-4 px-4",children:(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,s.jsx)(i.z,{variant:"outline",size:"sm",onClick:()=>A(e),children:"Edit"}),(0,s.jsx)(i.z,{variant:"destructive",size:"sm",onClick:()=>I(e.id),children:"Delete"})]})})]},e.id))})]})})})]}),(0,s.jsx)(u.Vq,{open:a,onOpenChange:e=>{e||(v(!1),k(null),z([{title:"",value:0}]),D((0,o.WU)(new Date,"yyyy-MM-dd")),S(null))},children:(0,s.jsxs)(u.cZ,{className:"bg-white dark:bg-neutral-800",children:[(0,s.jsx)(u.fK,{children:(0,s.jsx)(u.$N,{children:w?"Edit Entry":"Add New Entry"})}),(0,s.jsxs)("form",{onSubmit:q,className:"space-y-4",children:[(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsx)(f._,{htmlFor:"date",children:"Date"}),(0,s.jsx)(d.I,{id:"date",type:"date",value:C,onChange:e=>{D(e.target.value),S(null)},required:!0,className:"bg-white dark:bg-neutral-800"}),M&&(0,s.jsx)("p",{className:"text-sm text-red-500",children:M})]}),(0,s.jsx)("div",{className:"space-y-4",children:_.map((e,t)=>(0,s.jsxs)("div",{className:"flex gap-4 items-start",children:[(0,s.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,s.jsx)(f._,{children:"Title"}),(0,s.jsx)(d.I,{value:e.title,onChange:e=>U(t,"title",e.target.value),placeholder:"e.g., Savings, Investments, Property",required:!0,className:"bg-white dark:bg-neutral-800"})]}),(0,s.jsxs)("div",{className:"flex-1 space-y-2",children:[(0,s.jsx)(f._,{children:"Value"}),(0,s.jsx)(d.I,{type:"number",step:"0.01",value:e.value,onChange:e=>U(t,"value",e.target.value),required:!0,className:"bg-white dark:bg-neutral-800"})]}),t>0&&(0,s.jsx)(i.z,{type:"button",variant:"ghost",size:"icon",className:"mt-8",onClick:()=>E(t),children:(0,s.jsx)(m.Z,{className:"h-4 w-4"})})]},t))}),(0,s.jsxs)(i.z,{type:"button",variant:"outline",className:"w-full",onClick:()=>{z([..._,{title:"",value:0}])},children:[(0,s.jsx)(x.Z,{className:"h-4 w-4 mr-2"}),"Add Item"]}),(0,s.jsxs)("div",{className:"pt-4 border-t",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-4",children:[(0,s.jsx)("span",{className:"font-medium",children:"Total Net Worth:"}),(0,s.jsxs)("span",{className:"text-lg font-bold",children:["$",_.reduce((e,t)=>e+t.value,0).toLocaleString()]})]}),(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,s.jsx)(i.z,{type:"button",variant:"outline",onClick:()=>{v(!1),k(null),z([{title:"",value:0}]),D((0,o.WU)(new Date,"yyyy-MM-dd")),S(null)},children:"Cancel"}),(0,s.jsx)(i.z,{type:"submit",children:w?"Save Changes":"Add Entry"})]})]})]})]})})]})}},85754:function(e,t,a){"use strict";a.d(t,{z:function(){return o}});var s=a(3827),r=a(64090),n=a(59143),l=a(49769),i=a(1657);let d=(0,l.j)("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),o=r.forwardRef((e,t)=>{let{className:a,variant:r,size:l,asChild:o=!1,...c}=e,u=o?n.g7:"button";return(0,s.jsx)(u,{className:(0,i.cn)(d({variant:r,size:l,className:a})),ref:t,...c})});o.displayName="Button"},27815:function(e,t,a){"use strict";a.d(t,{Ol:function(){return i},Zb:function(){return l},aY:function(){return o},ll:function(){return d}});var s=a(3827),r=a(64090),n=a(1657);let l=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",a),...r})});l.displayName="Card";let i=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",a),...r})});i.displayName="CardHeader";let d=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("h3",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",a),...r})});d.displayName="CardTitle",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("p",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",a),...r})}).displayName="CardDescription";let o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",a),...r})});o.displayName="CardContent",r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",a),...r})}).displayName="CardFooter"},42706:function(e,t,a){"use strict";a.d(t,{$N:function(){return m},Vq:function(){return d},cZ:function(){return u},fK:function(){return f}});var s=a(3827),r=a(64090),n=a(72936),l=a(52235),i=a(1657);let d=n.fC;n.xz;let o=n.h_,c=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.aV,{ref:t,className:(0,i.cn)("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r})});c.displayName=n.aV.displayName;let u=r.forwardRef((e,t)=>{let{className:a,children:r,...d}=e;return(0,s.jsxs)(o,{children:[(0,s.jsx)(c,{}),(0,s.jsxs)(n.VY,{ref:t,className:(0,i.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...d,children:[r,(0,s.jsxs)(n.x8,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[(0,s.jsx)(l.Z,{className:"h-4 w-4"}),(0,s.jsx)("span",{className:"sr-only",children:"Close"})]})]})]})});u.displayName=n.VY.displayName;let f=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,i.cn)("flex flex-col space-y-1.5 text-center sm:text-left",t),...a})};f.displayName="DialogHeader";let m=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.Dx,{ref:t,className:(0,i.cn)("text-lg font-semibold leading-none tracking-tight",a),...r})});m.displayName=n.Dx.displayName,r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.dk,{ref:t,className:(0,i.cn)("text-sm text-muted-foreground",a),...r})}).displayName=n.dk.displayName},45179:function(e,t,a){"use strict";a.d(t,{I:function(){return l}});var s=a(3827),r=a(64090),n=a(1657);let l=r.forwardRef((e,t)=>{let{className:a,type:r,...l}=e;return(0,s.jsx)("input",{type:r,className:(0,n.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),ref:t,...l})});l.displayName="Input"},49842:function(e,t,a){"use strict";a.d(t,{_:function(){return o}});var s=a(3827),r=a(64090),n=a(24602),l=a(49769),i=a(1657);let d=(0,l.j)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),o=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(n.f,{ref:t,className:(0,i.cn)(d(),a),...r})});o.displayName=n.f.displayName},1657:function(e,t,a){"use strict";a.d(t,{cn:function(){return n}});var s=a(75504),r=a(51367);function n(){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];return(0,r.m6)((0,s.W)(t))}}},function(e){e.O(0,[150,714,447,917,791,971,69,744],function(){return e(e.s=43284)}),_N_E=e.O()}]);